"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeDefaultPlaceholders = exports.readFileInTree = exports.isNullOrUndefined = exports.interpolate = void 0;
const schematics_1 = require("@angular-devkit/schematics");
const ts = require("typescript");
function interpolate(text, ...params) {
    params.forEach((param, i) => {
        const pattern = new RegExp('{\\s*' + i + '\\s*}');
        text = text.replace(pattern, String(param));
    });
    return text;
}
exports.interpolate = interpolate;
function isNullOrUndefined(value) {
    return value === null || value === undefined;
}
exports.isNullOrUndefined = isNullOrUndefined;
function readFileInTree(tree, filePath) {
    const buffer = tree.read(filePath);
    if (isNullOrUndefined(buffer))
        throw new schematics_1.SchematicsException(interpolate("[File Not Found] There is no file at \"{0}\" path." /* FileNotFound */, filePath));
    const text = buffer.toString('utf-8');
    return ts.createSourceFile(filePath, text, ts.ScriptTarget.Latest, true);
}
exports.readFileInTree = readFileInTree;
function removeDefaultPlaceholders(oldParams) {
    const newParams = {};
    Object.entries(oldParams).forEach(([key, value]) => {
        newParams[key] = value === '__default' ? undefined : value;
    });
    return newParams;
}
exports.removeDefaultPlaceholders = removeDefaultPlaceholders;
//# sourceMappingURL=common.js.map